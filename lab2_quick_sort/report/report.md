# 《操作系统》课程实验报告 高级进程间通信 快速排序问题

> 姓名：陈彦旭
>
> 班级：无24

## 1 实验目的

1. 通过对进程间高级通信问题的编程实现，加深理解进程间高级通信的原理；
2. 对 Windows 或 Linux 涉及的几种高级进程间通信机制有更进一步的了解；
3. 熟悉 Windows 或 Linux 中定义的与高级进程间通信有关的函数。

## 2 问题描述

对于有 1,000,000 个乱序数据的数据文件执行快速排序。

## 3 实验步骤

（1）首先产生包含 1,000,000 个随机数（数据类型可选整型或者浮点型）的数据文件；

（2）每次数据分割后产生两个新的进程（或线程）处理分割后的数据，每个进程（线程）处理的数据小于 1000 以后不再分割（控制产生的进程在 20 个左右）；

（3）线程（或进程）之间的通信可以选择下述机制之一进行：管道（无名管道或命名管道），消息队列，共享内存。

（4）通过适当的函数调用创建上述 IPC 对象，通过调用适当的函数调用实现数据的读出与写入；

（5）需要考虑线程（或进程）间的同步；

（6）线程（或进程）运行结束，通过适当的系统调用结束线程（或进程）。

## 4 设计思路

> OS: Ubuntu 24.04.2 LTS x86_64.
>
> Language: C++ (-std=C++20).

选择“共享内存”机制实现。

首先使用 python 脚本生成 1,000,000 个随机整数，保存为二进制文件 `dada/integers.bin` 。

主进程首先从二进制文件中读取数据，创建共享内存，将数据加载到共享内存中。

每一次递归划分生成的子进程分别处理左右两个子区间，各个子进程 “原地”修改共享内存中某一个区间内的数据，子进程又可重复父进程的操作继续递归划分。在本程序中，由于不同的子进程负责排序不同的划分区域，因此不会出现数据竞争，理论上可以不需要读写锁，但是为了增强程序的健壮性和体现共享内存的特点，我们仍然设计了读写锁，保证不同子进程对数据读写的互斥。

## 文件结构说明

## 思考题

（1）你采用了你选择的机制而不是另外的两种机制解决该问题，请解释你做出这种选择的理由。

答：

（2）你认为另外的两种机制是否同样可以解决该问题？如果可以请给出你的思路；如果不能，请解释理由。

答：

## 实验感想
